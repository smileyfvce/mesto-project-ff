{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/components/card.js","webpack://mesto-project-ff/./src/components/modal.js","webpack://mesto-project-ff/./src/components/validation.js","webpack://mesto-project-ff/./src/components/api.js","webpack://mesto-project-ff/./src/pages/index.js"],"sourcesContent":["export { createCard };\r\n\r\n// Функция создания карточки\r\nconst createCard = (\r\n  card,\r\n  userId,\r\n  deleteCard,\r\n  likedCard,\r\n  dislikedCard,\r\n  openImage\r\n) => {\r\n  const cardTemplate = document.querySelector(\"#card-template\").content; // темплейт карточки\r\n  const placesItem = cardTemplate\r\n    .querySelector(\".places__item\")\r\n    .cloneNode(true); // карточка\r\n  const cardImage = placesItem.querySelector(\".card__image\"); // картинка\r\n  const cardTitle = placesItem.querySelector(\".card__title\"); // заголовок\r\n  const deleteButton = placesItem.querySelector(\".card__delete-button\"); // кнопка удаления\r\n  const likeButton = placesItem.querySelector(\".card__like-button\"); // кнопка лайка\r\n  const likeCount = placesItem.querySelector(\".card__like-count\"); // счётчик лайка\r\n  cardTitle.textContent = card.name;\r\n  cardImage.src = card.link;\r\n  cardImage.alt = `Фотография места: ${card.name}`;\r\n  likeCount.textContent = card.likes.length;\r\n  placesItem.dataset.cardId = card._id;\r\n\r\n  // если карта наша, то слушаем кнопку / если нет то прячем корзину\r\n  if (card.owner._id === userId) {\r\n    // событие (клик на корзину)\r\n    deleteButton.addEventListener(\"click\", () => {\r\n      deleteCard(card._id)\r\n        .then(() => {\r\n          placesItem.remove();\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    });\r\n  } else {\r\n    // прячем\r\n    deleteButton.remove();\r\n  }\r\n\r\n  // красим наши лайки\r\n  if (card.likes.some((like) => like._id === userId)) {\r\n    likeButton.classList.add(\"card__like-button_is-active\");\r\n  }\r\n\r\n  // событие (клик на кнопку лайка)\r\n\r\n  likeButton.addEventListener(\"click\", () => {\r\n    if (likeButton.classList.contains(\"card__like-button_is-active\")) {\r\n      dislikedCard(card._id)\r\n        .then((card) => {\r\n          likeButton.classList.remove(\"card__like-button_is-active\");\r\n          likeCount.textContent = card.likes.length;\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    } else {\r\n      likedCard(card._id)\r\n        .then((elem) => {\r\n          likeButton.classList.add(\"card__like-button_is-active\");\r\n          likeCount.textContent = elem.likes.length;\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    }\r\n  });\r\n\r\n  // событие (клик на картинку)\r\n\r\n  cardImage.addEventListener(\"click\", () => {\r\n    openImage(card.name, card.link);\r\n  });\r\n\r\n  return placesItem;\r\n};\r\n","export { openModal, closeModal };\r\n\r\n// функция открытия попапа\r\n\r\nconst openModal = (popupItem) => {\r\n  popupItem.classList.add(\"popup_is-opened\");\r\n  popupItem.classList.add(\"popup_is-animated\");\r\n  document.addEventListener(\"keydown\", closeEscape);\r\n  popupItem.addEventListener(\"mousedown\", closeOverlay);\r\n}\r\n\r\n// функция закрытия попапа\r\n\r\nconst closeModal = (popupItem) => {\r\n  popupItem.classList.remove(\"popup_is-opened\");\r\n  document.removeEventListener(\"keydown\", closeEscape);\r\n  popupItem.removeEventListener(\"mousedown\", closeOverlay);\r\n}\r\n\r\n// закрыть через Esc\r\n\r\nconst closeEscape = (evt) => {\r\n  if (evt.key === \"Escape\") {\r\n    const openClassModal = document.querySelector(\".popup_is-opened\");\r\n    closeModal(openClassModal);\r\n  }\r\n}\r\n\r\n// закрыть по оверлею\r\n\r\nconst closeOverlay = (evt) => {\r\n  if (evt.target === evt.currentTarget) {\r\n    closeModal(evt.currentTarget);\r\n  }\r\n}\r\n","export { enableValidation, clearValidation, validationConfig };\r\n\r\n// Настройки валидации\r\nconst validationConfig = {\r\n  formSelector: \".popup__form\",\r\n  inputSelector: \".popup__input\",\r\n  submitButtonSelector: \".popup__button\",\r\n  inactiveButtonClass: \"popup__button_disabled\",\r\n  inputErrorClass: \"popup__input_type_error\",\r\n  errorClass: \"popup__error_visible\",\r\n};\r\n\r\n// функция сообщения ошибки\r\nconst showInputError = (\r\n  formElement,\r\n  inputElement,\r\n  errorMessage,\r\n  validationObj\r\n) => {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n  inputElement.classList.add(validationObj.inputErrorClass);\r\n  errorElement.textContent = errorMessage;\r\n  errorElement.classList.add(validationObj.errorClass);\r\n};\r\n\r\n// функция очистки ошибок\r\nconst hideInputError = (formElement, inputElement, validationObj) => {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n  inputElement.classList.remove(validationObj.inputErrorClass);\r\n  errorElement.classList.remove(validationObj.errorClass);\r\n  errorElement.textContent = \"\";\r\n};\r\n\r\n// функция проверки валидности\r\nconst isValid = (formElement, inputElement, validationObj) => {\r\n  if (inputElement.validity.patternMismatch) {\r\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage);\r\n  } else {\r\n    inputElement.setCustomValidity(\"\");\r\n  }\r\n\r\n  if (!inputElement.validity.valid) {\r\n    showInputError(\r\n      formElement,\r\n      inputElement,\r\n      inputElement.validationMessage,\r\n      validationObj\r\n    );\r\n  } else {\r\n    hideInputError(formElement, inputElement, validationObj);\r\n  }\r\n};\r\n\r\n// функция проверки перед отправкой\r\nconst hasInvalidInput = (inputList) => {\r\n  return inputList.some((inputElement) => {\r\n    return !inputElement.validity.valid;\r\n  });\r\n};\r\n\r\n// функция управления состоянии кнопки\r\nconst toggleButtonState = (inputList, buttonElement, validationObj) => {\r\n  if (hasInvalidInput(inputList)) {\r\n    buttonElement.disabled = true;\r\n    buttonElement.classList.add(validationObj.inactiveButtonClass);\r\n  } else {\r\n    buttonElement.disabled = false;\r\n    buttonElement.classList.remove(validationObj.inactiveButtonClass);\r\n  }\r\n};\r\n\r\nconst setEventListener = (formElement, validationObj) => {\r\n  const inputList = Array.from(\r\n    formElement.querySelectorAll(validationObj.inputSelector)\r\n  );\r\n  const buttonElement = formElement.querySelector(\r\n    validationObj.submitButtonSelector\r\n  );\r\n\r\n  toggleButtonState(inputList, buttonElement, validationObj);\r\n\r\n  inputList.forEach((inputElement) => {\r\n    inputElement.addEventListener(\"input\", () => {\r\n      isValid(formElement, inputElement, validationObj);\r\n      toggleButtonState(inputList, buttonElement, validationObj);\r\n    });\r\n  });\r\n};\r\n\r\nconst enableValidation = (validationObj) => {\r\n  const formList = Array.from(\r\n    document.querySelectorAll(validationObj.formSelector)\r\n  );\r\n  formList.forEach((formElement) => {\r\n    setEventListener(formElement, validationObj);\r\n  });\r\n};\r\n\r\n// Функция очистки валидации формы\r\nconst clearValidation = (formElement, validationObj) => {\r\n  const inputList = Array.from(\r\n    formElement.querySelectorAll(validationObj.inputSelector)\r\n  );\r\n  const buttonElement = formElement.querySelector(\r\n    validationObj.submitButtonSelector\r\n  );\r\n\r\n  inputList.forEach((inputElement) => {\r\n    hideInputError(formElement, inputElement, validationObj);\r\n    inputElement.setCustomValidity(\"\");\r\n  });\r\n\r\n  toggleButtonState(inputList, buttonElement, validationObj);\r\n};\r\n","export {\r\n  getCards, // вывести карточку\r\n  getUserInfo, // вывести информацию\r\n  updateUserInfo, // обновить информацию\r\n  postNewCard, // добавить новую карточку на сервер\r\n  deleteCardFromServer, // удалить карточку с сервера\r\n  putLike, // добавить лайк в массив\r\n  deleteLike, // удалить лайк из массива\r\n  updateAvatar, // обновить аватар\r\n};\r\n\r\nconst config = {\r\n  baseUrl: \"https://nomoreparties.co/v1/wff-cohort-42\",\r\n  headers: {\r\n    authorization: \"7d693a10-239b-4e8a-9e6c-5ec746eb9fb2\",\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n};\r\n\r\n// Получение ответа от сервера\r\n\r\nconst checkResponse = (res) => {\r\n  if (res.ok) {\r\n    return res.json();\r\n  }\r\n  // если ошибка, отклоняем промисы\r\n  return Promise.reject(`Ошибка: ${res.status}`);\r\n};\r\n\r\n// Получаем информацию о пользователе\r\n\r\nconst getUserInfo = () => {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    headers: config.headers,\r\n  }).then((res) => {\r\n    return checkResponse(res);\r\n  });\r\n};\r\n\r\n// Получаем карточки с сервера\r\n\r\nconst getCards = () => {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    headers: config.headers,\r\n  }).then((res) => {\r\n    return checkResponse(res);\r\n  });\r\n};\r\n\r\n// Обновление информации профиля\r\n\r\nconst updateUserInfo = (info) => {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    method: \"PATCH\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name: info.name,\r\n      about: info.about,\r\n    }),\r\n  }).then((res) => {\r\n    return checkResponse(res);\r\n  });\r\n};\r\n\r\n// Создание новой карточки\r\n\r\nconst postNewCard = (cardName, cardLink) => {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    method: \"POST\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name: cardName,\r\n      link: cardLink,\r\n    }),\r\n  }).then((res) => {\r\n    return checkResponse(res);\r\n  });\r\n};\r\n\r\n// Удаление карточки\r\n\r\nconst deleteCardFromServer = (cardId) => {\r\n  return fetch(`${config.baseUrl}/cards/${cardId}`, {\r\n    method: \"DELETE\",\r\n    headers: config.headers,\r\n  }).then((res) => {\r\n    return checkResponse(res);\r\n  });\r\n};\r\n\r\n// Получаем лайки\r\n\r\nconst putLike = (cardId) => {\r\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n    method: \"PUT\",\r\n    headers: config.headers,\r\n  }).then((res) => {\r\n    return checkResponse(res);\r\n  });\r\n};\r\n\r\n// Удаление лайка\r\n\r\nconst deleteLike = (cardId) => {\r\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n    method: \"DELETE\",\r\n    headers: config.headers,\r\n  }).then((res) => {\r\n    return checkResponse(res);\r\n  });\r\n};\r\n\r\n// Обновление аватара\r\n\r\nconst updateAvatar = (url) => {\r\n  return fetch(`${config.baseUrl}/users/me/avatar`, {\r\n    method: \"PATCH\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      avatar: url,\r\n    }),\r\n  }).then((res) => {\r\n    return checkResponse(res);\r\n  });\r\n};\r\n","import \"./index.css\";\r\n\r\n// Импорт функций\r\nimport { createCard } from \"../components/card.js\";\r\nimport { openModal, closeModal } from \"../components/modal.js\";\r\nimport {\r\n  enableValidation,\r\n  clearValidation,\r\n  validationConfig,\r\n} from \"../components/validation.js\";\r\nimport {\r\n  getCards, // вывести карточку\r\n  getUserInfo, // вывести информацию\r\n  updateUserInfo, // обновить информацию\r\n  postNewCard, // добавить новую карточку на сервер\r\n  deleteCardFromServer, // удалить карточку с сервера\r\n  putLike, // добавить лайк в массив\r\n  deleteLike, // удалить лайк из массива\r\n  updateAvatar, // обновить аватар\r\n} from \"../components/api.js\";\r\n\r\n// DOM узлы\r\nconst placesList = document.querySelector(\".places__list\");\r\nlet userId;\r\n\r\n// попапы\r\nconst popupAvatar = document.querySelector(\".popup_type_avatar\");\r\nconst popupEditProfile = document.querySelector(\".popup_type_edit\");\r\nconst popupAddNewCard = document.querySelector(\".popup_type_new-card\");\r\nconst popupImage = document.querySelector(\".popup_type_image\");\r\n\r\n// элементы попапов\r\nconst profileName = document.querySelector(\".profile__title\");\r\nconst profileJob = document.querySelector(\".profile__description\");\r\nconst imageCard = document.querySelector(\".popup__image\");\r\nconst captionCard = document.querySelector(\".popup__caption\");\r\n\r\n// формы и инпуты\r\nconst avatarForm = document.forms[\"avatar\"];\r\nconst formEditProfile = document.forms[\"edit-profile\"];\r\nconst formAddCard = document.forms[\"new-place\"];\r\nconst avatarInput = popupAvatar.querySelector(\".popup__input_type_url\");\r\nconst nameInput = popupEditProfile.querySelector(\".popup__input_type_name\");\r\nconst jobInput = popupEditProfile.querySelector(\r\n  \".popup__input_type_description\"\r\n);\r\nconst popupInputCardName = popupAddNewCard.querySelector(\r\n  \".popup__input_type_card-name\"\r\n);\r\nconst popupInputUrl = popupAddNewCard.querySelector(\".popup__input_type_url\");\r\n\r\n// кнопки\r\nconst editAvatarButton = document.querySelector(\".profile__image\");\r\nconst profileEditBtn = document.querySelector(\".profile__edit-button\");\r\nconst cardAddBtn = document.querySelector(\".profile__add-button\");\r\nconst popupCloseBtns = document.querySelectorAll(\".popup__close\");\r\n\r\n// вызов включения валидации\r\nenableValidation(validationConfig);\r\n\r\n// функция отображения загрузки на кнопке\r\nconst loadBtn = (elem, load) => {\r\n  const btn = elem.querySelector(\".popup__button\");\r\n  if (load) {\r\n    btn.textContent = \"Сохранение...\";\r\n  } else {\r\n    btn.textContent = \"Сохранить\";\r\n  }\r\n};\r\n\r\n// наполнение редактора профиля\r\n\r\nconst profileInfo = () => {\r\n  nameInput.value = profileName.textContent;\r\n  jobInput.value = profileJob.textContent;\r\n};\r\n\r\n// функция редактирования аватара\r\n\r\nconst editAvatar = (evt) => {\r\n  evt.preventDefault();\r\n  loadBtn(evt.target, true);\r\n  const linkAva = avatarInput.value;\r\n  updateAvatar(linkAva)\r\n    .then((user) => {\r\n      editAvatarButton.style.backgroundImage = `url(${user.avatar})`;\r\n      closeModal(popupAvatar);\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    })\r\n    .finally(() => {\r\n      loadBtn(evt.target, false);\r\n    });\r\n};\r\n\r\n// функция редактирования профиля\r\n\r\nconst editProfileInfo = (evt) => {\r\n  evt.preventDefault();\r\n  loadBtn(evt.target, true);\r\n  const newInfo = {\r\n    name: nameInput.value,\r\n    about: jobInput.value,\r\n  };\r\n  updateUserInfo(newInfo)\r\n    .then((user) => {\r\n      profileName.textContent = user.name;\r\n      profileJob.textContent = user.about;\r\n      closeModal(popupEditProfile);\r\n    })\r\n    .catch((err) => console.log(err))\r\n    .finally(() => {\r\n      loadBtn(evt.target, false);\r\n    });\r\n};\r\n\r\n// функция добавления новой карточки\r\n\r\nconst addNewCard = (evt) => {\r\n  evt.preventDefault();\r\n  loadBtn(evt.target, true);\r\n  const cardName = popupInputCardName.value;\r\n  const cardUrl = popupInputUrl.value;\r\n  postNewCard(cardName, cardUrl)\r\n    .then((card) => {\r\n      const newCard = createCard(\r\n        card,\r\n        userId,\r\n        deleteCardFromServer,\r\n        putLike,\r\n        deleteLike,\r\n        openImage\r\n      );\r\n      placesList.prepend(newCard);\r\n      closeModal(popupAddNewCard);\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    })\r\n    .finally(() => {\r\n      loadBtn(evt.target, false);\r\n    });\r\n};\r\n\r\n// функция открытия картинки\r\nfunction openImage(name, link) {\r\n  imageCard.alt = name;\r\n  imageCard.src = link;\r\n  captionCard.textContent = name;\r\n  openModal(popupImage);\r\n}\r\n\r\nPromise.all([getUserInfo(), getCards()])\r\n  .then(([user, cards]) => {\r\n    // информация о пользователе\r\n    userId = user._id;\r\n    profileName.textContent = user.name;\r\n    profileJob.textContent = user.about;\r\n    editAvatarButton.style.backgroundImage = `url(${user.avatar})`;\r\n    // карточки\r\n    cards.forEach((card) => {\r\n      placesList.append(\r\n        createCard(\r\n          card,\r\n          userId,\r\n          deleteCardFromServer,\r\n          putLike,\r\n          deleteLike,\r\n          openImage\r\n        )\r\n      );\r\n    });\r\n  })\r\n  .catch((err) => {\r\n    console.log(err);\r\n  });\r\n\r\n// СОБЫТИЯ\r\n\r\n//КЛИК\r\n// кнопка редактора аватара\r\neditAvatarButton.addEventListener(\"click\", () => {\r\n  openModal(popupAvatar);\r\n  clearValidation(avatarForm, validationConfig);\r\n});\r\n// кнопка редактора профиля\r\nprofileEditBtn.addEventListener(\"click\", () => {\r\n  openModal(popupEditProfile);\r\n  profileInfo();\r\n  clearValidation(formEditProfile, validationConfig);\r\n});\r\n// кнопка добавления карточки\r\ncardAddBtn.addEventListener(\"click\", () => {\r\n  openModal(popupAddNewCard);\r\n  formAddCard.reset();\r\n  clearValidation(formAddCard, validationConfig);\r\n});\r\n// кнопка закрытия попапов\r\npopupCloseBtns.forEach((button) => {\r\n  button.addEventListener(\"click\", () => {\r\n    const popupItem = button.closest(\".popup\");\r\n    closeModal(popupItem);\r\n  });\r\n});\r\n\r\n// САБМИТ\r\n// форма редактора аватара\r\navatarForm.addEventListener(\"submit\", editAvatar);\r\n// форма редактора профиля\r\nformEditProfile.addEventListener(\"submit\", editProfileInfo);\r\n// форма добавления карточки\r\nformAddCard.addEventListener(\"submit\", addNewCard);\r\n"],"names":["createCard","card","userId","deleteCard","likedCard","dislikedCard","openImage","placesItem","document","querySelector","content","cloneNode","cardImage","cardTitle","deleteButton","likeButton","likeCount","textContent","name","src","link","alt","concat","likes","length","dataset","cardId","_id","owner","addEventListener","then","remove","catch","err","console","log","some","like","classList","add","contains","elem","openModal","popupItem","closeEscape","closeOverlay","closeModal","removeEventListener","evt","key","openClassModal","target","currentTarget","validationConfig","formSelector","inputSelector","submitButtonSelector","inactiveButtonClass","inputErrorClass","errorClass","hideInputError","formElement","inputElement","validationObj","errorElement","id","toggleButtonState","inputList","buttonElement","validity","valid","hasInvalidInput","disabled","clearValidation","Array","from","querySelectorAll","forEach","setCustomValidity","config","baseUrl","headers","authorization","checkResponse","res","ok","json","Promise","reject","status","deleteCardFromServer","fetch","method","putLike","deleteLike","placesList","popupAvatar","popupEditProfile","popupAddNewCard","popupImage","profileName","profileJob","imageCard","captionCard","avatarForm","forms","formEditProfile","formAddCard","avatarInput","nameInput","jobInput","popupInputCardName","popupInputUrl","editAvatarButton","profileEditBtn","cardAddBtn","popupCloseBtns","patternMismatch","errorMessage","showInputError","validationMessage","isValid","setEventListener","loadBtn","load","all","_ref","_ref2","user","cards","about","style","backgroundImage","avatar","append","value","reset","button","closest","url","preventDefault","body","JSON","stringify","finally","info","cardName","cardLink","newCard","prepend"],"sourceRoot":""}